# Web界面使用指南

## 简介

Fin-Data-Maker Web界面提供了一个直观、易用的图形化操作界面，让您无需编写代码即可完成数据源连接、数据质量分析和测试数据生成。

## 启动Web应用

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 启动服务器

```bash
python webapp.py
```

### 3. 访问界面

在浏览器中打开：`http://localhost:5000`

## 使用流程

Web界面采用4步向导式流程，引导您完成数据生成：

### 步骤1：连接数据源

1. **选择数据库类型**
   - MySQL
   - PostgreSQL
   - Oracle
   - SQL Server
   - SQLite

2. **填写连接信息**
   - 主机地址（SQLite除外）
   - 端口号（自动填充默认端口）
   - 数据库名（SQLite为文件路径）
   - 用户名和密码

3. **测试连接**
   - 点击"测试连接"按钮
   - 连接成功后自动进入下一步

### 步骤2：选择表

1. **浏览表列表**
   - 系统自动列出数据库中的所有表
   - 显示每个表的字段数和行数

2. **选择目标表**
   - 点击表卡片选择要处理的表
   - 系统自动提取表结构

3. **查看表结构**
   - 字段名称和类型
   - 必填、唯一等约束
   - 主键信息

4. **进入下一步**
   - 点击"下一步"进入数据分析

### 步骤3：数据质量分析（可选）

1. **设置分析参数**
   - **采样数量**：建议100-10000条
   - **质量要求**：
     - 宽松：完整性≥70%，唯一性≥70%
     - 中等：完整性≥90%，唯一性≥90%（默认）
     - 严格：完整性≥95%，唯一性≥95%

2. **开始分析**
   - 点击"开始分析"按钮
   - 系统采样现有数据并分析质量特征

3. **查看分析结果**
   - **质量规则建议**：根据数据特征自动生成
   - **字段质量概况**：
     - 完整性比例（绿色=优秀，黄色=良好，红色=需改进）
     - 唯一性比例
     - 数值范围
     - 字符串长度范围

4. **选择操作**
   - 点击"下一步"应用分析结果
   - 点击"跳过分析"直接生成数据

### 步骤4：生成数据

1. **设置生成参数**
   - **生成数量**：1-100000条
   - **随机种子**：设置固定值可重复生成相同数据
   - **数据验证**：是否启用质量规则验证

2. **生成数据**
   - 点击"生成数据"按钮
   - 等待数据生成完成

3. **查看结果**
   - **验证报告**：
     - 总行数
     - 有效行数
     - 错误数和警告数
   - **数据预览**：查看前10条生成的数据

4. **导出数据**
   - **CSV格式**：适合Excel打开
   - **Excel格式**：.xlsx文件
   - **JSON格式**：适合程序处理

## 功能特点

### 1. 可视化操作
- 无需编写代码
- 直观的图形界面
- 分步骤引导操作

### 2. 智能分析
- 自动提取表结构
- 分析现有数据特征
- 生成质量规则建议

### 3. 灵活配置
- 支持多种数据库
- 可调节采样和质量要求
- 自定义生成参数

### 4. 实时预览
- 即时查看字段信息
- 预览生成的数据
- 查看验证报告

### 5. 多格式导出
- CSV（Excel兼容）
- Excel (.xlsx)
- JSON

## 常见问题

### Q1: 连接数据库失败？

**可能原因：**
- 数据库服务未启动
- 连接信息错误
- 网络不通
- 缺少数据库驱动

**解决方法：**
- 检查数据库服务状态
- 确认主机、端口、用户名、密码
- 检查防火墙设置
- 安装对应的数据库驱动（如pymysql、psycopg2等）

### Q2: 找不到表？

**可能原因：**
- 数据库为空
- 权限不足
- 选择了错误的数据库

**解决方法：**
- 确认数据库中有表
- 检查用户权限
- 确认连接到正确的数据库

### Q3: 数据分析很慢？

**建议：**
- 减少采样数量（如从10000降到1000）
- 对大表进行采样而不是全表扫描
- 确保数据库有适当的索引

### Q4: 生成的数据不符合预期？

**解决方法：**
- 启用"数据质量分析"
- 检查字段定义是否正确
- 调整质量要求级别
- 查看验证报告中的错误信息

### Q5: 导出文件在哪里？

- 导出的文件会自动下载到浏览器的默认下载目录
- 文件名格式：`表名_时间戳.格式`

## 技术架构

### 后端
- **框架**：Flask
- **API**：RESTful风格
- **会话管理**：Flask Session

### 前端
- **UI框架**：Bootstrap 5
- **图标**：Bootstrap Icons
- **JavaScript**：原生ES6+

### 数据处理
- **数据库连接**：SQLAlchemy
- **数据生成**：Faker + 自定义生成器
- **数据验证**：自定义规则引擎

## API接口

如需集成到其他系统，可使用以下API接口：

| 接口 | 方法 | 说明 |
|------|------|------|
| `/api/databases/types` | GET | 获取支持的数据库类型 |
| `/api/connection/test` | POST | 测试数据库连接 |
| `/api/tables/list` | GET | 列出所有表 |
| `/api/table/extract` | POST | 提取表结构 |
| `/api/table/profile` | POST | 分析数据质量 |
| `/api/data/generate` | POST | 生成测试数据 |
| `/api/data/export` | POST | 导出数据 |
| `/api/session/clear` | POST | 清除会话 |

## 部署建议

### 开发环境
```bash
python webapp.py
```

### 生产环境

使用Gunicorn：

```bash
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 webapp:app
```

使用Docker：

```dockerfile
FROM python:3.9
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
EXPOSE 5000
CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:5000", "webapp:app"]
```

## 安全注意事项

> **重要**：当前版本未实现权限认证，仅供内部测试使用。

生产环境部署建议：
1. 添加用户认证（如Flask-Login）
2. 使用HTTPS
3. 限制访问IP
4. 设置连接数限制
5. 定期清理临时文件
6. 使用Redis管理会话
7. 添加操作日志

## 更新日志

### v1.0.0 (2024-01)
- 首个Web界面版本
- 支持5种数据库类型
- 4步向导式流程
- 数据质量分析
- 多格式导出
